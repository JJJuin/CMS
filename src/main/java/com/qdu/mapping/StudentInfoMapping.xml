<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qdu.mapping.StudentInfoMapping">
	<cache type="com.qdu.cache.RedisCache"/>
	<resultMap type="com.qdu.pojo.StudentInfo" id="StudentInfoResult">
		<id property="studentInfoId" column="StudentInfoId" />
		<result property="signIn" column="SignIn"/>
		<result property="comeLate" column="ComeLate" />
		<result property="leaveEarlier" column="LeaveEarlier" />
		<result property="absenteeism" column="Absenteeism" />
		
		
        <association property="student" javaType="com.qdu.pojo.Student">
        <id property="studentRoNo" column="StudentRoNo" />
		<result property="studentPassword" column="StudentPassword" />
		<result property="studentMobile" column="StudentMobile" />
		<result property="studentEmail" column="StudentEmail" />
		<result property="studentName" column="StudentName" />
		<result property="studentGender" column="StudentGender" />
		<result property="studentPhoto" column="StudentPhoto" />
        </association>

        <association property="course" javaType="com.qdu.pojo.Course">
        <id property="courseId" column="CourseId" />
		<result property="courseName" column="CourseName" />
		<result property="courseType" column="CourseType" />
		<result property="classCapacity" column="ClassCapacity" />
		<result property="startTime" column="StartTime" />
		<result property="endTime" column="EndTime" />
		<result property="currentYear" column="CurrentYear" />
		<result property="schoolTem" column="SchoolTem" />
		<result property="qrImg" column="QrImg" />
        </association>
	</resultMap>

	<select id="selectStudentInfoByCourse" resultMap="StudentInfoResult">
		select * from
		StudentInfo where StudentInfoId in(select StudentInfoId from
		Course
		where CourseId = #{courseId})
	</select>
	
	<select id="selectStudentInfoByMany" parameterType="HashMap" resultMap="StudentInfoResult">
	select * from StudentInfo where StudentRoNo = #{studentRoNo} And CourseId = #{courseId}
	</select>
	
	<select id="selectInfoList" parameterType="int" resultMap="StudentInfoResult">
	select * from StudentInfo where CourseId = #{courseId}
	</select>
	
	
	<insert id="insertStudentInfo" parameterType="HashMap">
	insert into 
	StudentInfo(StudentRoNo,CourseId) 
	values(#{studentRoNo},#{courseId})
	</insert>
	
	<delete id="deleteStudentInfoByCourse" parameterType="int">
	delete from StudentInfo where CourseId = #{clazzId}
	</delete>
	
	<update id="updateStudentInfoAboutSignIn" parameterType="HashMap">
	update StudentInfo set
	SignIn = #{signIn}
	where StudentInfoId = #{studentInfoId}
	</update>
	
	<update id="updateStudentInfoAboutAbs" parameterType="HashMap">
	update StudentInfo set
	Absenteeism = #{absenteeism}
	where StudentInfoId = #{studentInfoId}
	</update>

</mapper>